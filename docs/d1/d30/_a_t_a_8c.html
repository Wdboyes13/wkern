<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WKern: src/fileio/ATA.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WKern
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('d1/d30/_a_t_a_8c.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ATA.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../d6/d33/kerror_8h_source.html">err/kerror.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d74/fileio_8h_source.html">fileio/fileio.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/ddb/kio_8h_source.html">io/kio.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/d3c/util_8h_source.html">utils/util.h</a>&gt;</code><br />
</div>
<p><a href="../../d1/d30/_a_t_a_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1900b48862fde060e2793d5d113cf6f4" id="r_a1900b48862fde060e2793d5d113cf6f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1900b48862fde060e2793d5d113cf6f4">AtaPoll</a> ()</td></tr>
<tr class="memdesc:a1900b48862fde060e2793d5d113cf6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll the ATA device until it's ready for data transfer.  <br /></td></tr>
<tr class="memitem:a6c22a78fa6a488041bb15afa10a26137" id="r_a6c22a78fa6a488041bb15afa10a26137"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c22a78fa6a488041bb15afa10a26137">AtaReadSector</a> (<a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> lba, <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *buffer)</td></tr>
<tr class="memdesc:a6c22a78fa6a488041bb15afa10a26137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single 512-byte sector from the ATA device using LBA addressing.  <br /></td></tr>
<tr class="memitem:a42403de508595b74b8ce384c2026a1d5" id="r_a42403de508595b74b8ce384c2026a1d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42403de508595b74b8ce384c2026a1d5">AtaWriteSector</a> (<a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> lba, const <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *buffer)</td></tr>
<tr class="memdesc:a42403de508595b74b8ce384c2026a1d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single 512-byte sector to the ATA device using LBA addressing.  <br /></td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a1900b48862fde060e2793d5d113cf6f4" name="a1900b48862fde060e2793d5d113cf6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1900b48862fde060e2793d5d113cf6f4">&#9670;&#160;</a></span>AtaPoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AtaPoll </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Poll the ATA device until it's ready for data transfer. </p>
<p>This function waits for the ATA device to clear the BSY (busy) bit, checks for errors, and verifies that the DRQ (data request) bit is set, indicating the device is ready to transfer data.</p>
<dl class="section note"><dt>Note</dt><dd>This function blocks until the device is ready or an error occurs. On error, the system panics. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d30/_a_t_a_8c_source.html#l00034">34</a> of file <a class="el" href="../../d1/d30/_a_t_a_8c_source.html">ATA.c</a>.</p>

</div>
</div>
<a id="a6c22a78fa6a488041bb15afa10a26137" name="a6c22a78fa6a488041bb15afa10a26137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c22a78fa6a488041bb15afa10a26137">&#9670;&#160;</a></span>AtaReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AtaReadSector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></td>          <td class="paramname"><span class="paramname"><em>lba</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a single 512-byte sector from the ATA device using LBA addressing. </p>
<p>Reads a 512-byte sector from ATA disk into buffer.</p>
<p>Sends commands to the ATA device to read one sector specified by the logical block address (LBA). The read sector data is stored in the provided buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lba</td><td>The logical block address of the sector to read. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to a 512-byte buffer where the read data will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Assumes the buffer is valid and large enough for one sector. </dd>
<dd>
Interrupts and device control signals are managed internally. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d30/_a_t_a_8c_source.html#l00063">63</a> of file <a class="el" href="../../d1/d30/_a_t_a_8c_source.html">ATA.c</a>.</p>

</div>
</div>
<a id="a42403de508595b74b8ce384c2026a1d5" name="a42403de508595b74b8ce384c2026a1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42403de508595b74b8ce384c2026a1d5">&#9670;&#160;</a></span>AtaWriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AtaWriteSector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></td>          <td class="paramname"><span class="paramname"><em>lba</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a single 512-byte sector to the ATA device using LBA addressing. </p>
<p>Writes a 512-byte sector to ATA disk from buffer.</p>
<p>Sends commands to the ATA device to write one sector specified by the logical block address (LBA). The data to write is taken from the provided buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lba</td><td>The logical block address of the sector to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to a 512-byte buffer containing the data to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Assumes the buffer is valid and contains at least one sector of data. </dd>
<dd>
This function blocks until the write completes and the cache is flushed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d30/_a_t_a_8c_source.html#l00097">97</a> of file <a class="el" href="../../d1/d30/_a_t_a_8c_source.html">ATA.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="../../dir_96abbbca331754df4984ed2fa52a25a7.html">fileio</a></li><li class="navelem"><a href="../../d1/d30/_a_t_a_8c.html">ATA.c</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for WKern by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
