\doxysection{main.\+c}
\hypertarget{main_8c_source}{}\label{main_8c_source}\index{src/main.c@{src/main.c}}
\mbox{\hyperlink{main_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00002}00002\ \textcolor{comment}{WKern\ -\/\ A\ Bare\ Metal\ OS\ /\ Kernel\ I\ am\ maKing\ (For\ Fun)}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00003}00003\ \textcolor{comment}{Copyright\ (C)\ 2025\ \ Wdboyes13}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00004}00004\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00005}00005\ \textcolor{comment}{This\ program\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00006}00006\ \textcolor{comment}{it\ under\ the\ terms\ of\ the\ GNU\ General\ Public\ License\ as\ published\ by}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00007}00007\ \textcolor{comment}{the\ Free\ Software\ Foundation,\ either\ version\ 3\ of\ the\ License,\ or}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00008}00008\ \textcolor{comment}{any\ later\ version.}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00009}00009\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00010}00010\ \textcolor{comment}{This\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00011}00011\ \textcolor{comment}{but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00012}00012\ \textcolor{comment}{MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00013}00013\ \textcolor{comment}{GNU\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00014}00014\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00015}00015\ \textcolor{comment}{You\ should\ have\ received\ a\ copy\ of\ the\ GNU\ General\ Public\ License}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00016}00016\ \textcolor{comment}{along\ with\ this\ program.\ \ If\ not,\ see\ <https://www.gnu.org/licenses/>.}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00017}00017\ \textcolor{comment}{*/}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00019}00019\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{shell_8h}{KShell/shell.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00020}00020\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{kerror_8h}{err/kerror.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00021}00021\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{fileio_8h}{fileio/fileio.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00022}00022\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{global_8h}{global.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00023}00023\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{idtirq_8h}{idt/idtirq.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00024}00024\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{kio_8h}{io/kio.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00025}00025\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{kmem_8h}{mem/kmem.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00026}00026\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{virtnet_8h}{net/virtnet.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00027}00027\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{pci_8h}{pci/pci.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00028}00028\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{bool_8h}{types/bool.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00029}00029\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{util_8h}{utils/util.h}}>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00031}\mbox{\hyperlink{global_8h_a5ac083a645d964373f022d03df4849c8}{00031}}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{global_8h_a5ac083a645d964373f022d03df4849c8}{name}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00032}\mbox{\hyperlink{global_8h_af1d3cff2e4538e23400e260bae3dadad}{00032}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{global_8h_af1d3cff2e4538e23400e260bae3dadad}{row}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00033}\mbox{\hyperlink{global_8h_afb52e720f5f0c483db5861f9e42e924e}{00033}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{global_8h_afb52e720f5f0c483db5861f9e42e924e}{col}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00034}\mbox{\hyperlink{global_8h_a2b30266941861e389096f125809faf0d}{00034}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{global_8h_a2b30266941861e389096f125809faf0d}{capson}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00035}\mbox{\hyperlink{global_8h_ace78b37abb3d96740735fd8eb41235e6}{00035}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{global_8h_ace78b37abb3d96740735fd8eb41235e6}{shift}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00036}\mbox{\hyperlink{global_8h_a1948e96711d16f6cd2d551c5c3b121c5}{00036}}\ \mbox{\hyperlink{nums_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}}\ \mbox{\hyperlink{global_8h_a1948e96711d16f6cd2d551c5c3b121c5}{iob}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00051}\mbox{\hyperlink{main_8c_adcf37d5384304e430d484ca81b39f805}{00051}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{main_8c_adcf37d5384304e430d484ca81b39f805}{KernelMain}}()\ \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00052}00052\ \ \ \ \ \mbox{\hyperlink{idt_8c_afc934f0079b12ec1cac0f6f49df28ca0}{AllIdt}}();\ \textcolor{comment}{//\ Do\ all\ IDT/GDT\ Setup}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00054}00054\ \ \ \ \ \mbox{\hyperlink{nums_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}}\ lba\ =\ \mbox{\hyperlink{fileio_8h_a83c6766aaf545016943897b8f8902a98}{FindFat16Partition}}();\ \textcolor{comment}{//\ LooK\ for\ a\ FAT16\ Partition\ on\ ATA}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00055}00055\ \ \ \ \ \mbox{\hyperlink{kio_8h_adff30c0a071f02dbf33d53ecef9535ed}{KprintHex}}(lba);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Print\ LBA\ Address}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00056}00056\ \ \ \ \ \textcolor{keywordflow}{if}\ (!lba)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ an\ ATA\ FAT16\ Partition\ was\ not\ found}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ lba\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ LBA\ To\ 0\ (Superfloppy)}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00058}00058\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{fat16__mnt_8c_acf67e9fa4293c49faae3ee63c1f307fe}{Fat16Mount}}(lba))\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Try\ mounting}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00060}00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{kerror_8h_a52c28e2f7c945ff67bc53d3dbccbfaf1}{Panic}}(\textcolor{stringliteral}{"{}Failed\ to\ mount\ FAT16\ volume"{}});\ \textcolor{comment}{//\ If\ mount\ fails\ panic}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00061}00061\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00063}00063\ \ \ \ \ \mbox{\hyperlink{alloc_8c_a9cf27cad30fd5a703658edb187f9c4c0}{KheapInit}}();\ \textcolor{comment}{//\ Initialize\ Heap}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00065}00065\ \ \ \ \ \mbox{\hyperlink{kio_8h_ab5b1620493cead3b15794c38e08b6cbb}{Kcfp}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00066}00066\ \ \ \ \ \mbox{\hyperlink{virtio_8c_a32830a541ec636e265304d1ad827c42a}{VirtnetSetup}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00067}00067\ \ \ \ \ \mbox{\hyperlink{kio_8h_a556dbaca28768fd91dacd53422223230}{Kprintf}}(\textcolor{stringliteral}{"{}\(\backslash\)nHello\ form\ WKern!\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00068}00068\ \ \ \ \ \mbox{\hyperlink{kio_8h_a556dbaca28768fd91dacd53422223230}{Kprintf}}(\textcolor{stringliteral}{"{}Enter\ your\ name:\ "{}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00069}00069\ \ \ \ \ \mbox{\hyperlink{keyin_8c_a31cf36db330251ce379e7dc5dc735ee0}{Kgetstr}}(\mbox{\hyperlink{global_8h_a5ac083a645d964373f022d03df4849c8}{name}},\ 19);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00070}00070\ \ \ \ \ \mbox{\hyperlink{kio_8h_af05ef766e47691675bd907cbd362e7c5}{Kputchar}}(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00072}00072\ \ \ \ \ \mbox{\hyperlink{kio_8h_a556dbaca28768fd91dacd53422223230}{Kprintf}}(\textcolor{stringliteral}{"{}Hello,\ \%s\(\backslash\)n"{}},\ \mbox{\hyperlink{global_8h_a5ac083a645d964373f022d03df4849c8}{name}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00074}00074\ \ \ \ \ \mbox{\hyperlink{keyin_8c_ac16b0ca4ec58cb9f895ab94a07a6bcee}{Kflush}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00075}00075\ \ \ \ \ \mbox{\hyperlink{kio_8h_a556dbaca28768fd91dacd53422223230}{Kprintf}}(\textcolor{stringliteral}{"{}Welcome!\(\backslash\)n\(\backslash\)nStarting...\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00076}00076\ \ \ \ \ \mbox{\hyperlink{ksleep_8c_ad23232f96172952210b1c1369513db37}{ZZZ}}(5);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00077}00077\ \ \ \ \ \mbox{\hyperlink{shell_8c_a80c98222810cc4d771ea5f99e1fb2d04}{Sh}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00078}00078\ \}}

\end{DoxyCode}
