<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WKern: src/fileio/fileio.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WKern
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dc/d74/fileio_8h.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">fileio.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Definitions and declarations for FAT16 filesystem and ATA I/O.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="../../d2/d49/global_8h_source.html">global.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d69/nums_8h_source.html">types/nums.h</a>&gt;</code><br />
</div>
<p><a href="../../dc/d74/fileio_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:FaT16Bpb" id="r_FaT16Bpb"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db2/struct_fa_t16_bpb.html">FaT16Bpb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">FAT16 BIOS Parameter Block (BPB) structure â€” describes volume layout.  <a href="../../d0/db2/struct_fa_t16_bpb.html#details">More...</a><br /></td></tr>
<tr class="memitem:FaT16Info" id="r_FaT16Info"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d9d/struct_fa_t16_info.html">FaT16Info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parsed FAT16 filesystem layout and parameters.  <a href="../../d2/d9d/struct_fa_t16_info.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7fad301214cc3b41f0dd60aaaaf9f3fc" id="r_a7fad301214cc3b41f0dd60aaaaf9f3fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a>&#160;&#160;&#160;0x1F0</td></tr>
<tr class="memdesc:a7fad301214cc3b41f0dd60aaaaf9f3fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA IO Base port for primary IDE channel.  <br /></td></tr>
<tr class="memitem:a53e44ff7073c479a20fc321cb6147a32" id="r_a53e44ff7073c479a20fc321cb6147a32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53e44ff7073c479a20fc321cb6147a32">ATA_CTRL</a>&#160;&#160;&#160;0x3F6</td></tr>
<tr class="memdesc:a53e44ff7073c479a20fc321cb6147a32"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Control port.  <br /></td></tr>
<tr class="memitem:a82b0c03860f06049d58daf210f368156" id="r_a82b0c03860f06049d58daf210f368156"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82b0c03860f06049d58daf210f368156">ATA_STATUS</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 7)</td></tr>
<tr class="memdesc:a82b0c03860f06049d58daf210f368156"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Status port (read)  <br /></td></tr>
<tr class="memitem:a7762d2c130e593e92b3c3b521e5779f2" id="r_a7762d2c130e593e92b3c3b521e5779f2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7762d2c130e593e92b3c3b521e5779f2">ATA_COMMAND</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 7)</td></tr>
<tr class="memdesc:a7762d2c130e593e92b3c3b521e5779f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Command port (write)  <br /></td></tr>
<tr class="memitem:aa9ede1f736f86805a4aa00df9543b32f" id="r_aa9ede1f736f86805a4aa00df9543b32f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9ede1f736f86805a4aa00df9543b32f">ATA_DRIVE</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 6)</td></tr>
<tr class="memdesc:aa9ede1f736f86805a4aa00df9543b32f"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Drive/head select port.  <br /></td></tr>
<tr class="memitem:ac8d77dce295ef928eca4dfedb5fb7d36" id="r_ac8d77dce295ef928eca4dfedb5fb7d36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8d77dce295ef928eca4dfedb5fb7d36">ATA_ERROR</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 1)</td></tr>
<tr class="memdesc:ac8d77dce295ef928eca4dfedb5fb7d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Error register port (read)  <br /></td></tr>
<tr class="memitem:a115159b2812d6643bbb67dc53b54f668" id="r_a115159b2812d6643bbb67dc53b54f668"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a115159b2812d6643bbb67dc53b54f668">ATA_SECCNT</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 2)</td></tr>
<tr class="memdesc:a115159b2812d6643bbb67dc53b54f668"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Sector count register port.  <br /></td></tr>
<tr class="memitem:a69742c7774d4d316420ea9505c7956cb" id="r_a69742c7774d4d316420ea9505c7956cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a69742c7774d4d316420ea9505c7956cb">ATA_LBA_LOW</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 3)</td></tr>
<tr class="memdesc:a69742c7774d4d316420ea9505c7956cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA LBA low byte port.  <br /></td></tr>
<tr class="memitem:a9fb63653dd2f522e806f711034a5b11f" id="r_a9fb63653dd2f522e806f711034a5b11f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fb63653dd2f522e806f711034a5b11f">ATA_LBA_MID</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 4)</td></tr>
<tr class="memdesc:a9fb63653dd2f522e806f711034a5b11f"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA LBA mid byte port.  <br /></td></tr>
<tr class="memitem:ad7d110cd7a30fd360237bee7c8104712" id="r_ad7d110cd7a30fd360237bee7c8104712"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7d110cd7a30fd360237bee7c8104712">ATA_LBA_HI</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 5)</td></tr>
<tr class="memdesc:ad7d110cd7a30fd360237bee7c8104712"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA LBA high byte port.  <br /></td></tr>
<tr class="memitem:a10441946900b59df8e0c67d69a1379f0" id="r_a10441946900b59df8e0c67d69a1379f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10441946900b59df8e0c67d69a1379f0">ATA_DATA</a>&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 0)</td></tr>
<tr class="memdesc:a10441946900b59df8e0c67d69a1379f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA Data port (read/write 16-bit)  <br /></td></tr>
<tr class="memitem:a758719f1c34c94f00f41e5cda9b26564" id="r_a758719f1c34c94f00f41e5cda9b26564"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a758719f1c34c94f00f41e5cda9b26564">ATA_CMD_READ_SECTORS</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="memdesc:a758719f1c34c94f00f41e5cda9b26564"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA command to read sectors.  <br /></td></tr>
<tr class="memitem:aed1929007f388cab23229c908be5bbaf" id="r_aed1929007f388cab23229c908be5bbaf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed1929007f388cab23229c908be5bbaf">ATA_SR_BSY</a>&#160;&#160;&#160;0x80</td></tr>
<tr class="memdesc:aed1929007f388cab23229c908be5bbaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA status register BSY (busy) bit.  <br /></td></tr>
<tr class="memitem:a27e6aaa78aaaa205a7dadf56b48d0bf6" id="r_a27e6aaa78aaaa205a7dadf56b48d0bf6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27e6aaa78aaaa205a7dadf56b48d0bf6">ATA_SR_DRQ</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="memdesc:a27e6aaa78aaaa205a7dadf56b48d0bf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA status register DRQ (data request) bit.  <br /></td></tr>
<tr class="memitem:a8a2cf843df1ae63d4d16748dfe72a592" id="r_a8a2cf843df1ae63d4d16748dfe72a592"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a2cf843df1ae63d4d16748dfe72a592">ATA_SR_ERR</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:a8a2cf843df1ae63d4d16748dfe72a592"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA status register ERR (error) bit.  <br /></td></tr>
<tr class="memitem:ae1b5097423101f551088fac3ea671aec" id="r_ae1b5097423101f551088fac3ea671aec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1b5097423101f551088fac3ea671aec">ATA_WRITE_CMD</a>&#160;&#160;&#160;0x30</td></tr>
<tr class="memdesc:ae1b5097423101f551088fac3ea671aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA command to write sectors.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6c22a78fa6a488041bb15afa10a26137" id="r_a6c22a78fa6a488041bb15afa10a26137"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c22a78fa6a488041bb15afa10a26137">AtaReadSector</a> (<a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> lba, <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *buffer)</td></tr>
<tr class="memdesc:a6c22a78fa6a488041bb15afa10a26137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a 512-byte sector from ATA disk into buffer.  <br /></td></tr>
<tr class="memitem:a42403de508595b74b8ce384c2026a1d5" id="r_a42403de508595b74b8ce384c2026a1d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42403de508595b74b8ce384c2026a1d5">AtaWriteSector</a> (<a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> lba, const <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *buffer)</td></tr>
<tr class="memdesc:a42403de508595b74b8ce384c2026a1d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a 512-byte sector to ATA disk from buffer.  <br /></td></tr>
<tr class="memitem:a83c6766aaf545016943897b8f8902a98" id="r_a83c6766aaf545016943897b8f8902a98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83c6766aaf545016943897b8f8902a98">FindFat16Partition</a> (void)</td></tr>
<tr class="memdesc:a83c6766aaf545016943897b8f8902a98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the FAT16 partition on disk.  <br /></td></tr>
<tr class="memitem:a25e15562fb1b780e6316940a4bd2fde9" id="r_a25e15562fb1b780e6316940a4bd2fde9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25e15562fb1b780e6316940a4bd2fde9">Writefile</a> (const char *filename, const char *ext, const char *data, <a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> size)</td></tr>
<tr class="memdesc:a25e15562fb1b780e6316940a4bd2fde9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to a FAT16 file, replacing its contents.  <br /></td></tr>
<tr class="memitem:a443f1dfce17aeb3b8110961d034d77bc" id="r_a443f1dfce17aeb3b8110961d034d77bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a443f1dfce17aeb3b8110961d034d77bc">Fat16Ls</a> (void)</td></tr>
<tr class="memdesc:a443f1dfce17aeb3b8110961d034d77bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists files in the FAT16 root directory.  <br /></td></tr>
<tr class="memitem:acf67e9fa4293c49faae3ee63c1f307fe" id="r_acf67e9fa4293c49faae3ee63c1f307fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acf67e9fa4293c49faae3ee63c1f307fe">Fat16Mount</a> (<a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> partition_lba)</td></tr>
<tr class="memdesc:acf67e9fa4293c49faae3ee63c1f307fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mounts FAT16 partition and reads filesystem info.  <br /></td></tr>
<tr class="memitem:a08e4988eb7beeffb9188674f29a975f6" id="r_a08e4988eb7beeffb9188674f29a975f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08e4988eb7beeffb9188674f29a975f6">Fileconts</a> (const char *filename, const char *ext)</td></tr>
<tr class="memdesc:a08e4988eb7beeffb9188674f29a975f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints contents of a FAT16 file.  <br /></td></tr>
<tr class="memitem:a0955c984a7b27de3da315eefeb4db734" id="r_a0955c984a7b27de3da315eefeb4db734"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0955c984a7b27de3da315eefeb4db734">Mkfile</a> (const char *filename, const char *ext)</td></tr>
<tr class="memdesc:a0955c984a7b27de3da315eefeb4db734"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new empty file in the FAT16 root directory.  <br /></td></tr>
<tr class="memitem:a6339a034411051b10653a617583e1ddf" id="r_a6339a034411051b10653a617583e1ddf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6339a034411051b10653a617583e1ddf">Fat16RemoveFile</a> (const char *filename, const char *ext)</td></tr>
<tr class="memdesc:a6339a034411051b10653a617583e1ddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a file from the FAT16 root directory and frees clusters.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a666a93dce54663bac1b67500b58cbb48" id="r_a666a93dce54663bac1b67500b58cbb48"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/d9d/struct_fa_t16_info.html">FaT16Info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a666a93dce54663bac1b67500b58cbb48">fat16</a></td></tr>
<tr class="memdesc:a666a93dce54663bac1b67500b58cbb48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global FAT16 filesystem info struct.  <br /></td></tr>
<tr class="memitem:a5373399b54661f02f43e4bb33da332f8" id="r_a5373399b54661f02f43e4bb33da332f8"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5373399b54661f02f43e4bb33da332f8">irq14stat</a></td></tr>
<tr class="memdesc:a5373399b54661f02f43e4bb33da332f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">IRQ status flags for IRQ14 and IRQ15 (primary and secondary IDE interrupts)  <br /></td></tr>
<tr class="memitem:aececdae3bdd58be3f5913bf7b2fd510d" id="r_aececdae3bdd58be3f5913bf7b2fd510d"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aececdae3bdd58be3f5913bf7b2fd510d">irq15stat</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definitions and declarations for FAT16 filesystem and ATA I/O. </p>

<p class="definition">Definition in file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a758719f1c34c94f00f41e5cda9b26564" name="a758719f1c34c94f00f41e5cda9b26564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a758719f1c34c94f00f41e5cda9b26564">&#9670;&#160;</a></span>ATA_CMD_READ_SECTORS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_CMD_READ_SECTORS&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA command to read sectors. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00061">61</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a7762d2c130e593e92b3c3b521e5779f2" name="a7762d2c130e593e92b3c3b521e5779f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7762d2c130e593e92b3c3b521e5779f2">&#9670;&#160;</a></span>ATA_COMMAND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_COMMAND&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Command port (write) </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00037">37</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a53e44ff7073c479a20fc321cb6147a32" name="a53e44ff7073c479a20fc321cb6147a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e44ff7073c479a20fc321cb6147a32">&#9670;&#160;</a></span>ATA_CTRL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_CTRL&#160;&#160;&#160;0x3F6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Control port. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00031">31</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a10441946900b59df8e0c67d69a1379f0" name="a10441946900b59df8e0c67d69a1379f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10441946900b59df8e0c67d69a1379f0">&#9670;&#160;</a></span>ATA_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_DATA&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Data port (read/write 16-bit) </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00058">58</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="aa9ede1f736f86805a4aa00df9543b32f" name="aa9ede1f736f86805a4aa00df9543b32f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ede1f736f86805a4aa00df9543b32f">&#9670;&#160;</a></span>ATA_DRIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_DRIVE&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 6)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Drive/head select port. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00040">40</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="ac8d77dce295ef928eca4dfedb5fb7d36" name="ac8d77dce295ef928eca4dfedb5fb7d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8d77dce295ef928eca4dfedb5fb7d36">&#9670;&#160;</a></span>ATA_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_ERROR&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Error register port (read) </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00043">43</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a7fad301214cc3b41f0dd60aaaaf9f3fc" name="a7fad301214cc3b41f0dd60aaaaf9f3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">&#9670;&#160;</a></span>ATA_IO_BASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_IO_BASE&#160;&#160;&#160;0x1F0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA IO Base port for primary IDE channel. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00028">28</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="ad7d110cd7a30fd360237bee7c8104712" name="ad7d110cd7a30fd360237bee7c8104712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7d110cd7a30fd360237bee7c8104712">&#9670;&#160;</a></span>ATA_LBA_HI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_LBA_HI&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA LBA high byte port. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00055">55</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a69742c7774d4d316420ea9505c7956cb" name="a69742c7774d4d316420ea9505c7956cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69742c7774d4d316420ea9505c7956cb">&#9670;&#160;</a></span>ATA_LBA_LOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_LBA_LOW&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA LBA low byte port. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00049">49</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a9fb63653dd2f522e806f711034a5b11f" name="a9fb63653dd2f522e806f711034a5b11f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb63653dd2f522e806f711034a5b11f">&#9670;&#160;</a></span>ATA_LBA_MID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_LBA_MID&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA LBA mid byte port. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00052">52</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a115159b2812d6643bbb67dc53b54f668" name="a115159b2812d6643bbb67dc53b54f668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a115159b2812d6643bbb67dc53b54f668">&#9670;&#160;</a></span>ATA_SECCNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_SECCNT&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Sector count register port. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00046">46</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="aed1929007f388cab23229c908be5bbaf" name="aed1929007f388cab23229c908be5bbaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed1929007f388cab23229c908be5bbaf">&#9670;&#160;</a></span>ATA_SR_BSY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_SR_BSY&#160;&#160;&#160;0x80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA status register BSY (busy) bit. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00064">64</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a27e6aaa78aaaa205a7dadf56b48d0bf6" name="a27e6aaa78aaaa205a7dadf56b48d0bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27e6aaa78aaaa205a7dadf56b48d0bf6">&#9670;&#160;</a></span>ATA_SR_DRQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_SR_DRQ&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA status register DRQ (data request) bit. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00067">67</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a8a2cf843df1ae63d4d16748dfe72a592" name="a8a2cf843df1ae63d4d16748dfe72a592"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a2cf843df1ae63d4d16748dfe72a592">&#9670;&#160;</a></span>ATA_SR_ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_SR_ERR&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA status register ERR (error) bit. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00070">70</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="a82b0c03860f06049d58daf210f368156" name="a82b0c03860f06049d58daf210f368156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b0c03860f06049d58daf210f368156">&#9670;&#160;</a></span>ATA_STATUS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_STATUS&#160;&#160;&#160;(<a class="el" href="#a7fad301214cc3b41f0dd60aaaaf9f3fc">ATA_IO_BASE</a> + 7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA Status port (read) </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00034">34</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a id="ae1b5097423101f551088fac3ea671aec" name="ae1b5097423101f551088fac3ea671aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1b5097423101f551088fac3ea671aec">&#9670;&#160;</a></span>ATA_WRITE_CMD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATA_WRITE_CMD&#160;&#160;&#160;0x30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA command to write sectors. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d74/fileio_8h_source.html#l00073">73</a> of file <a class="el" href="../../dc/d74/fileio_8h_source.html">fileio.h</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a6c22a78fa6a488041bb15afa10a26137" name="a6c22a78fa6a488041bb15afa10a26137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c22a78fa6a488041bb15afa10a26137">&#9670;&#160;</a></span>AtaReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AtaReadSector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></td>          <td class="paramname"><span class="paramname"><em>lba</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a 512-byte sector from ATA disk into buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lba</td><td>Logical block address of sector. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to buffer to store sector data (must be &gt;= 512 bytes).</td></tr>
  </table>
  </dd>
</dl>
<p>Reads a 512-byte sector from ATA disk into buffer.</p>
<p>Sends commands to the ATA device to read one sector specified by the logical block address (LBA). The read sector data is stored in the provided buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lba</td><td>The logical block address of the sector to read. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to a 512-byte buffer where the read data will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Assumes the buffer is valid and large enough for one sector. </dd>
<dd>
Interrupts and device control signals are managed internally. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d30/_a_t_a_8c_source.html#l00065">65</a> of file <a class="el" href="../../d1/d30/_a_t_a_8c_source.html">ATA.c</a>.</p>

</div>
</div>
<a id="a42403de508595b74b8ce384c2026a1d5" name="a42403de508595b74b8ce384c2026a1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42403de508595b74b8ce384c2026a1d5">&#9670;&#160;</a></span>AtaWriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AtaWriteSector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></td>          <td class="paramname"><span class="paramname"><em>lba</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a 512-byte sector to ATA disk from buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lba</td><td>Logical block address of sector. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to buffer containing data to write (must be &gt;= 512 bytes).</td></tr>
  </table>
  </dd>
</dl>
<p>Writes a 512-byte sector to ATA disk from buffer.</p>
<p>Sends commands to the ATA device to write one sector specified by the logical block address (LBA). The data to write is taken from the provided buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lba</td><td>The logical block address of the sector to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to a 512-byte buffer containing the data to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Assumes the buffer is valid and contains at least one sector of data. </dd>
<dd>
This function blocks until the write completes and the cache is flushed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d30/_a_t_a_8c_source.html#l00100">100</a> of file <a class="el" href="../../d1/d30/_a_t_a_8c_source.html">ATA.c</a>.</p>

</div>
</div>
<a id="a443f1dfce17aeb3b8110961d034d77bc" name="a443f1dfce17aeb3b8110961d034d77bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a443f1dfce17aeb3b8110961d034d77bc">&#9670;&#160;</a></span>Fat16Ls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fat16Ls </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists files in the FAT16 root directory. </p>
<p>Lists files in the FAT16 root directory.</p>
<p>Reads the root directory sectors of the FAT16 filesystem and prints the file names, their starting cluster numbers, and file sizes.</p>
<p>It handles:</p><ul>
<li>End of directory detection</li>
<li>Skipping deleted entries</li>
<li>Decoding little-endian cluster and size fields</li>
</ul>
<p>Output format per file: File: [filename].[ext] | Cluster: [cluster] | Size: [size in bytes] </p>

<p class="definition">Definition at line <a class="el" href="../../de/d77/ls_8c_source.html#l00037">37</a> of file <a class="el" href="../../de/d77/ls_8c_source.html">ls.c</a>.</p>

</div>
</div>
<a id="acf67e9fa4293c49faae3ee63c1f307fe" name="acf67e9fa4293c49faae3ee63c1f307fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf67e9fa4293c49faae3ee63c1f307fe">&#9670;&#160;</a></span>Fat16Mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> Fat16Mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></td>          <td class="paramname"><span class="paramname"><em>partition_lba</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mounts FAT16 partition and reads filesystem info. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition_lba</td><td>LBA address of FAT16 partition start. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure.</dd></dl>
<p>Mounts FAT16 partition and reads filesystem info.</p>
<p>Reads the boot sector, validates the FAT16 signature, and initializes the FAT16 info struct with important filesystem layout details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition_lba</td><td>Logical block address of the FAT16 partition. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure (invalid boot sector signature).</dd></dl>
<p>Prints mount status and key filesystem layout info via Kprintf. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d3d/fat16__mnt_8c_source.html#l00067">67</a> of file <a class="el" href="../../dc/d3d/fat16__mnt_8c_source.html">fat16_mnt.c</a>.</p>

</div>
</div>
<a id="a6339a034411051b10653a617583e1ddf" name="a6339a034411051b10653a617583e1ddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6339a034411051b10653a617583e1ddf">&#9670;&#160;</a></span>Fat16RemoveFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fat16RemoveFile </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>ext</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a file from the FAT16 root directory and frees clusters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>File name (8 chars). </td></tr>
    <tr><td class="paramname">ext</td><td>File extension (3 chars).</td></tr>
  </table>
  </dd>
</dl>
<p>Removes a file from the FAT16 root directory and frees clusters.</p>
<p>This function searches the FAT16 root directory for a file matching the specified filename and extension. If found, it marks the directory entry as deleted and frees all associated FAT clusters by clearing their entries in the FAT table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The 8-character filename (without extension). </td></tr>
    <tr><td class="paramname">ext</td><td>The 3-character file extension.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The function assumes the FAT16 filesystem structure is accessible through the global <span class="tt">fat16</span> variable. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d30/rmfile_8c_source.html#l00038">38</a> of file <a class="el" href="../../d6/d30/rmfile_8c_source.html">rmfile.c</a>.</p>

</div>
</div>
<a id="a08e4988eb7beeffb9188674f29a975f6" name="a08e4988eb7beeffb9188674f29a975f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e4988eb7beeffb9188674f29a975f6">&#9670;&#160;</a></span>Fileconts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fileconts </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>ext</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints contents of a FAT16 file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Name of the file (8 chars). </td></tr>
    <tr><td class="paramname">ext</td><td>File extension (3 chars).</td></tr>
  </table>
  </dd>
</dl>
<p>Prints contents of a FAT16 file.</p>
<p>This function searches the FAT16 root directory for a file matching the specified filename and extension. If found, it reads the first data cluster of the file and prints its contents as ASCII characters to the console. Non-printable characters are displayed as dots ('.'). The reading stops either at the end of the cluster or when a FAT16 EOF marker (0x1A) is found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The 8-character filename (without extension). </td></tr>
    <tr><td class="paramname">ext</td><td>The 3-character file extension.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The function assumes the FAT16 filesystem structure is accessible through the global <span class="tt">fat16</span> variable. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/db0/printconts_8c_source.html#l00040">40</a> of file <a class="el" href="../../d2/db0/printconts_8c_source.html">printconts.c</a>.</p>

</div>
</div>
<a id="a83c6766aaf545016943897b8f8902a98" name="a83c6766aaf545016943897b8f8902a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83c6766aaf545016943897b8f8902a98">&#9670;&#160;</a></span>FindFat16Partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> FindFat16Partition </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the FAT16 partition on disk. </p>
<dl class="section return"><dt>Returns</dt><dd>LBA of FAT16 partition start.</dd></dl>
<p>Finds the FAT16 partition on disk.</p>
<p>Reads the <a class="el" href="../../de/dae/struct_m_b_r.html" title="Master Boot Record structure layout.">MBR</a> sector, verifies the signature, then scans all partitions for a FAT16 type (0x04 or 0x06).</p>
<p>Prints debug info about partitions to kernel log.</p>
<dl class="section return"><dt>Returns</dt><dd>LBA of the FAT16 partition start or 0 if none found or invalid <a class="el" href="../../de/dae/struct_m_b_r.html" title="Master Boot Record structure layout.">MBR</a>. </dd></dl>
<p>&lt; Invalid <a class="el" href="../../de/dae/struct_m_b_r.html" title="Master Boot Record structure layout.">MBR</a> signature</p>
<p>&lt; Return FAT16 partition start LBA</p>
<p>&lt; No FAT16 partition found</p>

<p class="definition">Definition at line <a class="el" href="../../d3/dbb/_m_b_r_8c_source.html#l00069">69</a> of file <a class="el" href="../../d3/dbb/_m_b_r_8c_source.html">MBR.c</a>.</p>

</div>
</div>
<a id="a0955c984a7b27de3da315eefeb4db734" name="a0955c984a7b27de3da315eefeb4db734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0955c984a7b27de3da315eefeb4db734">&#9670;&#160;</a></span>Mkfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mkfile </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>ext</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new empty file in the FAT16 root directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>File name (8 chars). </td></tr>
    <tr><td class="paramname">ext</td><td>File extension (3 chars).</td></tr>
  </table>
  </dd>
</dl>
<p>Creates a new empty file in the FAT16 root directory.</p>
<p>This function searches for a free root directory entry and a free cluster, then creates a new directory entry for the specified filename and extension. It initializes the directory entry with default attributes and zero file size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The 8-character filename (without extension). </td></tr>
    <tr><td class="paramname">ext</td><td>The 3-character file extension.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The function assumes FAT16 filesystem data is accessible through the global <span class="tt">fat16</span> structure.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If no free directory entry or cluster is available, the function prints an error message and returns without creating the file. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d1f/mkfile_8c_source.html#l00041">41</a> of file <a class="el" href="../../d6/d1f/mkfile_8c_source.html">mkfile.c</a>.</p>

</div>
</div>
<a id="a25e15562fb1b780e6316940a4bd2fde9" name="a25e15562fb1b780e6316940a4bd2fde9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e15562fb1b780e6316940a4bd2fde9">&#9670;&#160;</a></span>Writefile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Writefile </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>ext</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d69/nums_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to a FAT16 file, replacing its contents. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>8.3 filename (name only). </td></tr>
    <tr><td class="paramname">ext</td><td>File extension (3 chars). </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to data buffer to write. </td></tr>
    <tr><td class="paramname">size</td><td>Size of data to write in bytes.</td></tr>
  </table>
  </dd>
</dl>
<p>Writes data to a FAT16 file, replacing its contents.</p>
<p>Searches for the file specified by filename and extension in the FAT16 root directory. If found, writes up to 512 bytes of data to the file's first cluster sector and updates the file size in the directory entry.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The 8-character filename (without extension). </td></tr>
    <tr><td class="paramname">ext</td><td>The 3-character file extension. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data buffer to write. </td></tr>
    <tr><td class="paramname">size</td><td>Number of bytes to write from the data buffer (max 512 bytes).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function only writes to the first cluster of the file. Writing beyond the first cluster or appending is not handled. </dd>
<dd>
Assumes the global <span class="tt">fat16</span> structure is properly initialized and accessible. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/write_8c_source.html#l00041">41</a> of file <a class="el" href="../../d1/d9b/write_8c_source.html">write.c</a>.</p>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a666a93dce54663bac1b67500b58cbb48" name="a666a93dce54663bac1b67500b58cbb48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a666a93dce54663bac1b67500b58cbb48">&#9670;&#160;</a></span>fat16</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d9d/struct_fa_t16_info.html">FaT16Info</a> fat16</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global FAT16 filesystem info struct. </p>
<p>Global FAT16 filesystem info struct. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d3d/fat16__mnt_8c_source.html#l00025">25</a> of file <a class="el" href="../../dc/d3d/fat16__mnt_8c_source.html">fat16_mnt.c</a>.</p>

</div>
</div>
<a id="a5373399b54661f02f43e4bb33da332f8" name="a5373399b54661f02f43e4bb33da332f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5373399b54661f02f43e4bb33da332f8">&#9670;&#160;</a></span>irq14stat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> irq14stat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>IRQ status flags for IRQ14 and IRQ15 (primary and secondary IDE interrupts) </p>

<p class="definition">Definition at line <a class="el" href="../../df/dca/irqflags_8c_source.html#l00022">22</a> of file <a class="el" href="../../df/dca/irqflags_8c_source.html">irqflags.c</a>.</p>

</div>
</div>
<a id="aececdae3bdd58be3f5913bf7b2fd510d" name="aececdae3bdd58be3f5913bf7b2fd510d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aececdae3bdd58be3f5913bf7b2fd510d">&#9670;&#160;</a></span>irq15stat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="../../dc/d69/nums_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> irq15stat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/dca/irqflags_8c_source.html#l00023">23</a> of file <a class="el" href="../../df/dca/irqflags_8c_source.html">irqflags.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="../../dir_96abbbca331754df4984ed2fa52a25a7.html">fileio</a></li><li class="navelem"><a href="../../dc/d74/fileio_8h.html">fileio.h</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for WKern by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
